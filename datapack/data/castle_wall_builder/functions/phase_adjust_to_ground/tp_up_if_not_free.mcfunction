# Checking all blocks in a 5x5 for air
execute as @e[type=minecraft:marker,tag=castle_wall_builder_not_free_marker] at @s if block ~-2 ~ ~-2 minecraft:air if block ~-2 ~ ~-1 minecraft:air if block ~-2 ~ ~ minecraft:air if block ~-2 ~ ~1 minecraft:air if block ~-2 ~ ~2 minecraft:air if block ~-1 ~ ~-2 minecraft:air if block ~-1 ~ ~-1 minecraft:air if block ~-1 ~ ~ minecraft:air if block ~-1 ~ ~1 minecraft:air if block ~-1 ~ ~2 minecraft:air if block ~ ~ ~-2 minecraft:air if block ~ ~ ~-1 minecraft:air if block ~ ~ ~ minecraft:air if block ~ ~ ~1 minecraft:air if block ~ ~ ~2 minecraft:air if block ~1 ~ ~-2 minecraft:air if block ~1 ~ ~-1 minecraft:air if block ~1 ~ ~ minecraft:air if block ~1 ~ ~1 minecraft:air if block ~1 ~ ~2 minecraft:air if block ~2 ~ ~-2 minecraft:air if block ~2 ~ ~-1 minecraft:air if block ~2 ~ ~ minecraft:air if block ~2 ~ ~1 minecraft:air if block ~2 ~ ~2 minecraft:air run tag @s remove castle_wall_builder_not_free_marker
execute as @e[type=minecraft:marker,tag=castle_wall_builder_not_free_marker] at @s run tp ~ ~1 ~
